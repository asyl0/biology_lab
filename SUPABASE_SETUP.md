# Настройка Supabase для проекта Биолаб

## Шаги настройки:

### 1. Выполните SQL скрипт
Скопируйте содержимое файла `supabase-setup.sql` и выполните в Supabase SQL Editor.

### 2. Проверьте переменные окружения
Убедитесь, что в `.env.local` правильно настроены:
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
```

### 3. Создайте первого админа
После выполнения SQL скрипта, создайте первого пользователя через регистрацию, затем в Supabase Dashboard обновите его роль на 'admin' в таблице profiles.

### 4. Проверьте Storage
Убедитесь, что bucket 'files' создан и настроен как публичный.

### 5. Тестирование
1. Запустите проект: `npm run dev`
2. Зарегистрируйтесь как админ
3. Создайте первую лабораторную работу
4. Проверьте загрузку файлов

## Что создается:

### Таблицы:
- `profiles` - профили пользователей с ролями
- `labs` - лабораторные работы
- `steam` - STEAM материалы  
- `teachers_materials` - материалы для учителей

### Storage:
- `files` bucket для загрузки файлов

### RLS политики:
- Пользователи видят только свои профили
- Все могут читать материалы
- Только админы могут управлять контентом

### Триггеры:
- Автоматическое создание профиля при регистрации

